---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
---
<Layout title="Event Calendar">
  <main class="container py-4">
    <header class="d-flex justify-content-between align-items-center mb-4">
      <a href="/" class="btn btn-secondary">Home</a>
      <h1 class="text-center text-light">Event Calendar</h1>
    </header>
    <!-- grid for calendar - autogenerated eventually -->
    <div class="event-list" class="p-3">
      <Card title="New Years' Hackathon" body="Join us on January 1st for a New Years' Day hackathon!" href="/event/1"/>
      <Card title="Spring Hackathon" body="Join us on March 20th for a Spring hackathon!" href="/event/2" />
        <Card title="Summer Hackathon" body="Join us on June 21st for a Summer hackathon!" href="/event/3" />
        <Card title="Fall Hackathon" body="Join us on September 22nd for a Fall hackathon!" href="/event/4" />
        <Card title="Winter Hackathon" body="Join us on December 21st for a Winter hackathon!" href="/event/5" />
        
        <Card title="Create new!" body="" href="/create"/>

    </div>
  </main>
</Layout>

<script>
    // @ts-nocheck
    // example events for one month

    import Card from "../components/Card.astro";

    // if form parameters exist in url, generate a Card with it
    const url = new URL(window.location.href)
    const params = new URLSearchParams(url.search);

    function createLinkCard(title, body, href) {
        // Create the <li> element and set the class
        const li = document.createElement('li');
        li.classList.add('link-card', 'm-3');

        // Create the <a> element and set the href attribute
        const a = document.createElement('a');
        a.href = href;

        // Create the <h2> element
        const h2 = document.createElement('h2');
        h2.textContent = title;

        // Create the <span> element for the arrow
        const span = document.createElement('span');
        span.textContent = 'â†’';

        // Append the <span> to the <h2>
        h2.appendChild(span);

        // Create the <p> element and set its text content
        const p = document.createElement('p');
        p.textContent = body;

        // Append the <h2> and <p> to the <a> element
        a.appendChild(h2);
        a.appendChild(p);

        // Append the <a> element to the <li>
        li.appendChild(a);

        return li;
        }

        function addStyles() {
            const style = document.createElement('style');
            style.textContent = `
                .link-card {
                list-style: none;
                display: flex;
                padding: 1px;
                background-color: #23262d;
                background-image: none;
                background-size: 400%;
                border-radius: 7px;
                background-position: 100%;
                transition: background-position 0.6s cubic-bezier(0.22, 1, 0.36, 1);
                box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
                }
                .link-card > a {
                width: 100%;
                text-decoration: none;
                line-height: 1.4;
                padding: calc(1.5rem - 1px);
                border-radius: 8px;
                color: white;
                background-color: #23262d;
                opacity: 0.8;
                }
                h2 {
                margin: 0;
                font-size: 1.25rem;
                transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
                }
                p {
                margin-top: 0.5rem;
                margin-bottom: 0;
                }
                .link-card:is(:hover, :focus-within) {
                background-position: 0;
                background-image: var(--accent-gradient);
                }
                .link-card:is(:hover, :focus-within) h2 {
                color: rgb(var(--accent-light));
                }
            `;
            document.head.appendChild(style);
            }

    if (params.get("title")) {
        const card = createLinkCard(params.get("title"), params.get("body"), params.get("href"))
        const eventsContainer = document.getElementsByClassName("event-list")[0]
        eventsContainer.insertBefore(card, eventsContainer.children[eventsContainer.children.length - 1])
    }
    
    addStyles()

</script>
